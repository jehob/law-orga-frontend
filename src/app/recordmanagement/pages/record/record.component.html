<!--
  ~ law&orga - record and organization management software for refugee law clinics
  ~ Copyright (C) 2019  Dominik Walser
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program.  If not, see <https://www.gnu.org/licenses/>
  -->

<!-- <div *ngIf="loading; else loaded" class="full_width record__progress-spinner-container">
  <mat-spinner></mat-spinner>
</div>
<ng-template #loaded>
  <app-full-record-detail *ngIf="type === 'FullRecord'"> </app-full-record-detail>
  <app-restricted-record-detail *ngIf="type === 'RestrictedRecord'">
  </app-restricted-record-detail>
</ng-template> -->


<div style="display: flex;">

  <div style="width: 50%">
    <mat-card>
      <mat-card-title>Record</mat-card-title>
      <mat-card-content>
        <dynamic-form [fields]="recordFields" [errors]="recordErrors" [data]="record" (send)="onRecordSend($event)">
        </dynamic-form>
      </mat-card-content>
      {{ record|json }}
    </mat-card>
  </div>

  <div style="width: 12px;"></div>

  <div style="width: 50%;">
    <mat-card style="margin-bottom: 12px;">
      <mat-card-title>Client</mat-card-title>
      <mat-card-content>
        <dynamic-form [fields]="clientFields" [errors]="clientErrors" [data]="client" (send)="onClientSend($event)">
        </dynamic-form>
      </mat-card-content>
      {{ client|json }}
    </mat-card>

    <mat-card>
      <mat-card-title>Messages</mat-card-title>
      <mat-card-content>
        <ul style="list-style: none; padding-left: 0;">
          <li *ngFor="let message of messages" style="border-bottom: 1px solid gray;">
            <div style="padding: 12px 0;">
              <div style="display: flex; justify-content: space-between;">
                <b>{{ message.sender ? message.sender.name : 'Deleted user' }}:</b>
                <i>{{ message.created_on|date:'dd.MM.yyyy HH:mm' }}</i>
              </div>
              <p style="margin-top: 2px; margin-bottom: 0;">{{ message.message }}</p>
            </div>
          </li>
        </ul>
        <dynamic-form [fields]="messageFields" [errors]="messageErrors" (send)="onMessageSend($event)"
          [data]="messageData"></dynamic-form>
      </mat-card-content>
    </mat-card>
  </div>

</div>